<div class="mx-auto ms-lg-80 ps-lg-4">
  <section>
    <div class="p-8 bg-white navbar-light">
      <div class="row align-items-center justify-content-between">
        <div class="col-12 col-lg-6 mb-4 mb-lg-0">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0">
              <li class="breadcrumb-item" aria-current="page">
                <a class="d-flex align-items-center" href="#">
                  <svg
                    class="text-primary me-2"
                    width="20"
                    height="20"
                    viewbox="0 0 20 20"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M16.8737 16.875V9.02647C16.8737 8.93939 16.8555 8.85327 16.8202 8.77363C16.785 8.694 16.7335 8.6226 16.6691 8.56402L10.4187 2.88159C10.3036 2.77699 10.1537 2.71904 9.99821 2.71904C9.84272 2.71905 9.69281 2.77701 9.57777 2.88162L3.3282 8.56402C3.26377 8.6226 3.2123 8.69399 3.17707 8.77363C3.14185 8.85326 3.12366 8.93937 3.12366 9.02645V16.875"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"></path>
                    <path
                      d="M1.24866 16.875H18.7487"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"></path>
                    <path
                      d="M11.8732 16.8743V12.4993C11.8732 12.3336 11.8073 12.1746 11.6901 12.0574C11.5729 11.9402 11.4139 11.8743 11.2482 11.8743H8.74817C8.58241 11.8743 8.42344 11.9402 8.30623 12.0574C8.18902 12.1746 8.12317 12.3336 8.12317 12.4993V16.8743"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"></path>
                  </svg>
                  <span>Dashboard</span>
                </a>
              </li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </section>

  <div class="container">
    <button
      type="button"
      class="btn btn-primary"
      data-bs-toggle="modal"
      data-bs-target="#addSupplierModal">
      Add New Supplier
    </button>

    <button
      type="button"
      class="btn btn-primary dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-expanded="false">
      Export
    </button>
    <ul class="dropdown-menu">
      <li>
        <a class="dropdown-item" href="#" id="exportToExcel">Export to Excel</a>
      </li>
      <li>
        <a class="dropdown-item" href="#" id="exportToPdf">Export to PDF</a>
      </li>
    </ul>

    <h2 class="mt-4">Suppliers</h2>
    <input
      type="text"
      id="supplierSearch"
      class="form-control mt-2 mb-2"
      placeholder="Search for a supplier" />

    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col">Supplier Name</th>
          <th scope="col">Address</th>
          <th scope="col">Email Address</th>
          <th scope="col">Phone Number</th>
          <th scope="col">VAT Number</th>
          <th scope="col">Contact Person</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody id="supplierTableBody">
        <!-- Supplier rows will be added here dynamically -->
      </tbody>
    </table>

    <div id="alertContainer"></div>
  </div>

  <!-- Add Supplier Modal -->
  <div
    class="modal fade"
    id="addSupplierModal"
    tabindex="-1"
    aria-labelledby="addSupplierModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addSupplierModalLabel">
            Add New Supplier
          </h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form>
            <div class="mb-3">
              <label for="supplierName" class="form-label">Supplier Name</label>
              <input
                type="text"
                class="form-control"
                id="supplierName"
                placeholder="Enter supplier name"
                required />
            </div>
            <div class="mb-3">
              <label for="supplierAddress" class="form-label">Address</label>
              <input
                type="text"
                class="form-control"
                id="supplierAddress"
                placeholder="Enter address"
                required />
            </div>
            <div class="mb-3">
              <label for="supplierEmail" class="form-label"
                >Email Address</label
              >
              <input
                type="email"
                class="form-control"
                id="supplierEmail"
                placeholder="Enter email address"
                required />
            </div>
            <div class="mb-3">
              <label for="supplierPhone" class="form-label">Phone Number</label>
              <input
                type="tel"
                class="form-control"
                id="supplierPhone"
                placeholder="Enter phone number"
                required />
            </div>
            <div class="mb-3">
              <label for="supplierVAT" class="form-label">VAT Number</label>
              <input
                type="text"
                class="form-control"
                id="supplierVAT"
                placeholder="Enter VAT number"
                required />
            </div>
            <div class="mb-3">
              <label for="supplierContact" class="form-label"
                >Contact Person</label
              >
              <input
                type="text"
                class="form-control"
                id="supplierContact"
                placeholder="Enter contact person"
                required />
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal">
            Close
          </button>
          <button type="button" class="btn btn-primary" id="saveSupplierButton">
            Save Supplier
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer container -->
  <div class="main-footer">
    <span>&copy; 2023. Agrifora Management System. All Rights Reserved.</span>
    <span
      >Created by:
      <a href="http://soxfort.com" target="_blank"
        >Soxfort Solutions | Intuitive Innovation</a
      ></span
    >
  </div>
  <!-- main-footer -->

  <script src="js/bootstrap/bootstrap.bundle.min.js"></script>
  <script src="js/main.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <script src="js/charts-demo.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const supplierNameInput = document.getElementById("supplierName");
      const supplierAddressInput = document.getElementById("supplierAddress");
      const supplierEmailInput = document.getElementById("supplierEmail");
      const supplierPhoneInput = document.getElementById("supplierPhone");
      const supplierVATInput = document.getElementById("supplierVAT");
      const supplierContactInput = document.getElementById("supplierContact");
      const supplierTableBody = document.getElementById("supplierTableBody");
      const saveSupplierButton = document.getElementById("saveSupplierButton");
      const addSupplierModal = new bootstrap.Modal(
        document.getElementById("addSupplierModal")
      );
      const alertContainer = document.getElementById("alertContainer");
      const supplierSearchInput = document.getElementById("supplierSearch");

      let supplierIdCounter = 1; // Initialize a supplier ID counter

      saveSupplierButton.addEventListener("click", function () {
        const supplierName = supplierNameInput.value;
        const supplierAddress = supplierAddressInput.value;
        const supplierEmail = supplierEmailInput.value;
        const supplierPhone = supplierPhoneInput.value;
        const supplierVAT = supplierVATInput.value;
        const supplierContact = supplierContactInput.value;

        // Create a new row in the supplier table
        const newRow = supplierTableBody.insertRow();
        newRow.innerHTML = `
                <td><a href="/supplier-profile/${supplierIdCounter}">${supplierName}</a></td>
                <td>${supplierAddress}</td>
                <td>${supplierEmail}</td>
                <td>${supplierPhone}</td>
                <td>${supplierVAT}</td>
                <td>${supplierContact}</td>
                <td>
                    <button class="btn btn-warning btn-sm edit-supplier" data-bs-toggle="modal" data-bs-target="#editSupplierModal"><i class="fas fa-pen"></i></button>
                    <button class="btn btn-danger btn-sm delete-supplier" data-bs-toggle="modal" data-bs-target="#deleteSupplierModal"><i class="fas fa-trash"></i></button>
                </td>
            `;

        // Increment the supplier ID counter
        supplierIdCounter++;

        // Clear the form inputs
        supplierNameInput.value = "";
        supplierAddressInput.value = "";
        supplierEmailInput.value = "";
        supplierPhoneInput.value = "";
        supplierVATInput.value = "";
        supplierContactInput.value = "";

        // Close the add supplier modal
        addSupplierModal.hide();

        // Display a success alert
        alertContainer.innerHTML = `
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    Supplier added successfully!
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            `;

        // Automatically dismiss the alert after 2 seconds
        setTimeout(function () {
          alertContainer.innerHTML = "";
        }, 1000);
      });

      // Search for suppliers
      supplierSearchInput.addEventListener("input", function () {
        const searchText = supplierSearchInput.value.toLowerCase();
        const rows = supplierTableBody.getElementsByTagName("tr");
        for (const row of rows) {
          const cells = row.getElementsByTagName("td");
          let rowVisible = false;
          for (const cell of cells) {
            if (cell.textContent.toLowerCase().includes(searchText)) {
              rowVisible = true;
              break;
            }
          }
          row.style.display = rowVisible ? "" : "none";
        }
      });
    });
  </script>
</div>
