
        <div class="mx-auto ms-lg-80 ps-lg-4">
      <section>
        <div class="p-8 bg-white navbar-light">
          <div class="row align-items-center justify-content-between">
            <div class="col-12 col-lg-6 mb-4 mb-lg-0">
              <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-0">
                  <li class="breadcrumb-item" aria-current="page">
                    <a class="d-flex align-items-center" href="#">
                      <svg class="text-primary me-2" width="20" height="20" viewbox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16.8737 16.875V9.02647C16.8737 8.93939 16.8555 8.85327 16.8202 8.77363C16.785 8.694 16.7335 8.6226 16.6691 8.56402L10.4187 2.88159C10.3036 2.77699 10.1537 2.71904 9.99821 2.71904C9.84272 2.71905 9.69281 2.77701 9.57777 2.88162L3.3282 8.56402C3.26377 8.6226 3.2123 8.69399 3.17707 8.77363C3.14185 8.85326 3.12366 8.93937 3.12366 9.02645V16.875" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M1.24866 16.875H18.7487" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M11.8732 16.8743V12.4993C11.8732 12.3336 11.8073 12.1746 11.6901 12.0574C11.5729 11.9402 11.4139 11.8743 11.2482 11.8743H8.74817C8.58241 11.8743 8.42344 11.9402 8.30623 12.0574C8.18902 12.1746 8.12317 12.3336 8.12317 12.4993V16.8743" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                      </svg>
                      <span>Inventory Management</span>
                    </a>
                  </li>
                  <li class="breadcrumb-item active" aria-current="page">
                    <a class="d-flex align-items-center" href="#">
                      <svg class="text-primary me-2" width="20" height="20" viewbox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.8125 16.25H2.1875" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M7.8125 16.25V6.875H12.1875" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M16.5625 3.125H12.1875V16.25H16.5625V3.125Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M3.4375 16.25V10.625H7.8125" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                      </svg>
                      <span>Dispatch</span>
                    </a>
                  </li>
                </ol>
              </nav>
            </div>
           
          </div>
        </div>
      </section>
    
      <div class="container">
<!-- New Dispatch Modal Button with top margin -->
<button type="button" class="btn btn-primary mt-3" data-bs-toggle="modal" data-bs-target="#newDispatchModal">
  <i class="fas fa-plus"></i> Initiate Dispatch
</button>
<br></br>
<div class="row">
<div class="col-md-4">
  <div class="input-group">
    <input type="date" id="fromDate" class="form-control" placeholder="From date">
    <input type="date" id="toDate" class="form-control" placeholder="To date">
    <button id="goButton" class="btn btn-primary">Go</button>
  </div>
</div>
<div class="col-md-4">
  <input type="text" id="searchInput" class="form-control" placeholder="Search...">
</div>
<div class="col-md-4">
  <button type="button" class="btn btn-primary mt-3"> <i class="fas fa-cog"></i> Generate Report
  </button>
</div> 
</div>

      
        
        
      
      
      
        <!-- Nav Tabs -->
<ul class="nav nav-tabs mt-3" id="dispatchTabs" role="tablist">
  <li class="nav-item" role="presentation">
      <a class="nav-link active" id="pending-tab" data-bs-toggle="tab" href="#pending" role="tab" aria-controls="pending" aria-selected="true">Pending Dispatch</a>
  </li>
  <li class="nav-item" role="presentation">
      <a class="nav-link" id="completed-tab" data-bs-toggle="tab" href="#completed" role="tab" aria-controls="completed" aria-selected="false">Completed</a>
  </li>
  <li class="nav-item" role="presentation">
      <a class="nav-link" id="cancelled-tab" data-bs-toggle="tab" href="#cancelled" role="tab" aria-controls="cancelled" aria-selected="false">Cancelled</a>
  </li>
</ul>

<!-- Tab Content -->
<div class="tab-content" id="dispatchTabsContent">
  <!-- Pending Dispatch Tab -->
  <div class="tab-pane fade show active" id="pending" role="tabpanel" aria-labelledby="pending-tab">
      <h2 class="mt-3">Pending Dispatch</h2>
      List of pending dispatch cards.
      <!-- Table for pending dispatches goes here -->
      <table class="table table-striped table-hover">
        <thead class="table-primary">
          <tr>
            <th scope="col">Dispatch No.</th>
            <th scope="col">Dispatch Date</th>
            <th scope="col">Product</th>
            <th scope="col">Warehouse</th>
            <th scope="col">Transporter</th>
            <th scope="col">Staff Assigned</th>
            <th scope="col">Number of Units</th>
           <th scope="col">Status</th>
            <th scope="col">Actions</th>
        </tr>
          </thead>
          <tbody id="pendingDispatchTableBody">
              <!-- Pending dispatches will be populated here -->
          </tbody>
      </table>
  </div>

  <!-- Completed Dispatch Tab -->
  <div class="tab-pane fade" id="completed" role="tabpanel" aria-labelledby="completed-tab">
      <h2 class="mt-3">Completed</h2>
      <!-- Table for completed dispatches goes here -->
      <table class="table table-striped" id="completedDispatchTable">
          <thead>
            <tr>
              <th scope="col">Dispatch No.</th>
              <th scope="col">Dispatch Date</th>
              <th scope="col">Product</th>
              <th scope="col">Warehouse</th>
              <th scope="col">Transporter</th>
              <th scope="col">Staff Assigned</th>
              <th scope="col">Number of Units</th>
             <th scope="col">Status</th>
              <th scope="col">Actions</th>
          </tr>
          </thead>
          <tbody id="completedDispatchTableBody">
              <!-- Completed dispatches will be populated here -->
          </tbody>
      </table>
  </div>

  <!-- Cancelled Dispatch Tab -->
  <div class="tab-pane fade" id="cancelled" role="tabpanel" aria-labelledby="cancelled-tab">
      <h2 class="mt-3">Cancelled</h2>
      <!-- Table for cancelled dispatches goes here -->
      <table class="table table-striped" id="cancelledDispatchTable">
          <thead>
            <tr>
              <th scope="col">Dispatch No.</th>
              <th scope="col">Dispatch Date</th>
              <th scope="col">Product</th>
              <th scope="col">Warehouse</th>
              <th scope="col">Transporter</th>
              <th scope="col">Staff Assigned</th>
              <th scope="col">Number of Units</th>
             <th scope="col">Status</th>
              <th scope="col">Actions</th>
          </tr>
          </thead>
          <tbody id="cancelledDispatchTableBody">
              <!-- Cancelled dispatches will be populated here -->
          </tbody>
      </table>
  </div>
</div>




<!-- New Dispatch Modal -->
<div class="modal fade" id="newDispatchModal" tabindex="-1" aria-labelledby="newDispatchModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="newDispatchModalLabel">New Stock Dispatch Card</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="dispatchForm">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="dispatchDate" class="form-label">Dispatch Date</label>
                            <input type="date" class="form-control" id="dispatchDate" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="warehouse" class="form-label">Warehouse</label>
                            <select class="form-select" id="warehouse" required>
                                <option value="">Select Warehouse</option>
                                <option value="Warehouse A">Bak Logistics</option>
                                <option value="Warehouse B">Supplier</option>
                                <!-- Add more warehouse options as needed -->
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="staffMember" class="form-label">Staff Member Assigned</label>
                            <select class="form-select" id="staffMember" required>
                                <option value="">Select Staff Member</option>
                                <option value="Staff A">Staff A</option>
                                <option value="Staff B">Staff B</option>
                                <!-- Add more staff member options as needed -->
                            </select>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="transporter" class="form-label">Transporter</label>
                            <select class="form-select" id="transporter" required>
                                <option value="">Select Transporter</option>
                                <option value="RA Transport">RA Transport</option>
                                <option value="King">King</option>
                                <option value="Cliff">Cliff</option>
                                <option value="Tatenda Mangodza">Tatenda Mangodza</option>
                                <option value="Mabonga">Mabonga</option>
                                <option value="Clemence">Clemence</option>
                                <option value="Mutarwa">Mutarwa</option>
                                <option value="Mutanga">Mutanga</option>
                                <option value="Mujaranji">Mujaranji</option>
                                <option value="Maggie Mudangwe">Maggie Mudangwe</option>
                                <option value="Passmore">Passmore</option>
                                <option value="Kwatedza (Pres Guard)">Kwatedza (Pres Guard)</option>
                                <option value="Makuyana (Sakunda)">Makuyana (Sakunda)</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                          <label for="driver" class="form-label">Driver</label>
                          <input type="text" class="form-control" id="driver" required>
                      </div>
                      
                    </div>
                    <div class="row">
                      <div class="col-md-6 mb-3">
                          <label for="product" class="form-label">Product</label>
                          <select class="form-select" id="product" required>
                              <option value="">Select Product</option>
                              <option value="Bread">Bread</option>
                              <option value="Milk">Milk</option>
                              <option value="Sugar">Sugar</option>
                              <option value="Tea">Tea</option>
                              <option value="Coffee">Coffee</option>
                              <option value="Eggs">Eggs</option>
                              <option value="Margarine">Margarine</option>
                              <option value="Mealie-Meal">Mealie-Meal</option>
                              <option value="Rice">Rice</option>
                              <option value="Cooking Oil">Cooking Oil</option>
                              <option value="Beef">Beef</option>
                              <option value="Chicken">Chicken</option>
                              <option value="Potatoes">Potatoes</option>
                              <option value="Tomatoes">Tomatoes</option>
                              <option value="Onions">Onions</option>
                              <option value="Cabbages">Cabbages</option>
                              <option value="Salt">Salt</option>
                              <option value="Bananas">Bananas</option>
                              <option value="Oranges">Oranges</option>
                              <option value="24-Hour Ration Packs">24-Hour Ration Packs</option>
                              <!-- Add more product options as needed -->
                          </select>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="quantity" class="form-label">Total Quantity Dispatched</label>
                        <div class="input-group mb-3">
                            <select class="form-select" id="unit" required>
                              <option value="Kg">Kgs</option>
                              <option value="Litres">Litres</option>
                              <option value="Bags">Bags</option>
                              <option value="Packs">Packs</option>
                              <option value="Loaves">Loaves</option>
                              <option value="Crates">Crates</option>
                              <option value="Heads">Heads</option>
                              <option value="Cases">Cases</option>
                                <!-- Add more unit options as needed -->
                            </select>
                            <input type="text" class="form-control" id="quantity" aria-label="Text input with unit selector">
                        </div>
                    </div>
                    
                  </div>
                  <div class="row">
                    <div class="mb-3 col-md-6">
                      <label for="unit_formation" class="form-label">Formation/Unit</label>
                      <select class="form-select" id="unit_formation" required>
                        <option value="">Select Formation/Unit</option>
                        <option value="51 INF BN">51 INF BN</option>
                        <option value="52 INF BN">52 INF BN</option>
                        <option value="53 INF BN">53 INF BN</option>
                        <option value="FATS">FATS</option>
                        <option value="HQ 5 BDE">HQ 5 BDE</option>
                        <option value="1.3 INF (Beitbridge)">1.3 INF (Beitbridge)</option>
                        <option value="1.2 INF (Binga)">1.2 INF (Binga)</option>
                        <option value="1 REF HOSP BYO">1 REF HOSP BYO</option>
                        <option value="11 Inf Bn">11 Inf Bn</option>
                        <option value="HQ 1 BDE">HQ 1 BDE</option>
                        <option value="HQ Byo Dist">HQ Byo Dist</option>
                        <option value="OSD Byo">OSD Byo</option>
                        <option value="RTD">RTD</option>
                        <option value="SMP">SMP</option>
                        <option value="JZM AFB">JZM AFB</option>
                        <option value="33 RF Bn">33 RF Bn</option>
                        <option value="41 INF (CHIYADZWA)">41 INF (CHIYADZWA)</option>
                        <option value="ACF">ACF</option>
                        <option value="CAD">CAD</option>
                        <option value="1.2 INF (Dekadrum)">1.2 INF (Dekadrum)</option>
                        <option value="3 Fd Regt">3 Fd Regt</option>
                        <option value="HQ ARTY BDE">HQ ARTY BDE</option>
                        <option value="TA Regt">TA Regt</option>
                        <option value="42 INF BN">42 INF BN</option>
                        <option value="1.3 INF (Guyu)">1.3 INF (Guyu)</option>
                        <option value="1.3 INF (Gwanda)">1.3 INF (Gwanda)</option>
                        <option value="JT AFB">JT AFB</option>
                        <option value="ZMA">ZMA</option>
                      </select>
                    </div>
                    
                    <div class="mb-3 col-md-6">
                        <label for="quantity" class="form-label">Quantity</label>
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" id="quantity" aria-label="Text input with unit selector">
                            <select class="form-select" id="unit" required>
                                <option value="Kg">Kgs</option>
                                <option value="Litres">Litres</option>
                                <option value="Bags">Bags</option>
                                <option value="Packs">Packs</option>
                                <option value="Loaves">Loaves</option>
                                <option value="Crates">Crates</option>
                                <option value="Heads">Heads</option>
                                <option value="Cases">Cases</option>
                                <!-- Add more unit options as needed -->
                            </select>
                        </div>
                    </div>
                </div>
                    <button type="button" class="btn btn-primary mt-3" id="addUnitBtn">Add Unit</button>
                    <div class="table-responsive mt-3">
                        <table class="table table-bordered" id="unitTable">
                            <thead>
                                <tr>
                                    <th>No.</th>
                                    <th>Formation/Unit</th>
                                    <th>Quantity</th>
                                    <th>Unit Measure</th>
                                    <th>Remove</th>
                                </tr>
                            </thead>
                            <tbody id="unitTableBody">
                                <!-- Unit rows will be added dynamically here -->
                            </tbody>
                        </table>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="saveDispatchButton">Save Dispatch</button>
            </div>
        </div>
    </div>
</div>


<!-- View Dispatch Modal -->
<div class="modal fade" id="viewDispatchModal" tabindex="-1" aria-labelledby="viewDispatchModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="viewDispatchModalLabel">View Dispatch Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="card">
          <div class="card-header">
   
          </div>
          <div class="card-body">
            <div class="row mb-3">
              <div class="col-md-6">
                <p class="mb-1"><strong>Date Dispatched:</strong> %{dispatchDate}</p>
                <p class="mb-1"><strong>Product Dispatched:</strong> Coffee</p>
                <p class="mb-1"><strong>Quantity:</strong> 100 Kg</p>
              </div>
              <div class="col-md-6">
                <p class="mb-1"><strong>Transporter:</strong> XYZ Transport</p>
                <p class="mb-1"><strong>Driver:</strong> John Doe</p>
                <p class="mb-1"><strong>Number of Units:</strong> 5</p>
              </div>
            </div>
      
           <table class="table table-striped table-hover">
        <thead class="table-primary">
                <tr>
                  <th>Formation/Unit</th>
                  <th>Location</th>
                  <th>Delivery Point</th>
                  <th>Quantity</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>51 INF BN</td>
                  <td>Location A</td>
                  <td>Point A</td>
                  <td>20 Kg</td>
                </tr>
                <tr>
                  <td>52 INF BN</td>
                  <td>Location B</td>
                  <td>Point B</td>
                  <td>30 Kg</td>
                </tr>
                <!-- Add more rows as needed -->
              </tbody>
              <tfoot>
                <tr>
                  <td colspan="3" class="text-end"><strong>Total:</strong></td>
                  <td>50 Kg</td>
                </tr>
              </tfoot>
            </table>
          </div>
       
      </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" data-bs-dismiss="modal">APPROVE</button>
        <button type="button" class="btn btn-danger">REJECT</button>
        <button type="button" class="btn btn-secondary">CLOSE</button>
</div>
</div>
    </div>
  </div>
</div>

<div class="main-footer">
  <span>&copy; 2023. Agrifora Management System. All Rights Reserved.</span>
  <span>Created by: <a href="http://soxfort.com" target="_blank">Soxfort Solutions | Intuitive Innovation</a></span>
</div><!-- main-footer -->
        <script src="js/bootstrap/bootstrap.bundle.min.js"></script>
    <script src="js/main.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="js/charts-demo.js"></script>
    <script>
      $(document).ready(function () {
        // Add Unit button click event
        $("#addUnitBtn").click(function () {
          addUnitRow();
        });
    
        // Save Dispatch button click event
        $("#saveDispatchButton").click(function () {
          saveDispatch();
        });
    
        // Function to add a new row to the unit table
        function addUnitRow() {
          var formationUnit = $("#unit_formation").val();
          var quantity = $("#quantity").val();
          var unitMeasure = $("#unit").val();
    
          // Validate input
          if (formationUnit === "" || quantity === "" || unitMeasure === "") {
            alert("Please fill in all fields before adding a unit.");
            return;
          }
    
          // Add row to table
          var newRow =
            "<tr>" +
            "<td></td>" +
            "<td>" + formationUnit + "</td>" +
            "<td>" + quantity + "</td>" +
            "<td>" + unitMeasure + "</td>" +
            "<td><button type='button' class='btn btn-danger btn-sm removeUnitBtn'>Remove</button></td>" +
            "</tr>";
    
          $("#unitTableBody").append(newRow);
    
          // Update row numbers
          updateRowNumbers();
        }
    
        // Function to update row numbers in the unit table
        function updateRowNumbers() {
          $("#unitTableBody tr").each(function (index) {
            $(this).find("td:first").text(index + 1);
          });
        }
    
        // Function to handle removing a unit row
        $(document).on("click", ".removeUnitBtn", function () {
          $(this).closest("tr").remove();
          updateRowNumbers();
        });
    
        // Function to save dispatch (you can replace this with your own logic)
        function saveDispatch() {
          // Add your logic here to save dispatch data
          alert("Dispatch saved successfully!");
          // You can also close the modal if needed
          $("#newDispatchModal").modal("hide");
        }
      });
    </script>
    
    <script>
      // Assuming you have a global array to store pending dispatch data
      var pendingDispatches = [];
    
      $(document).ready(function () {
        // Save Dispatch button click event
        $("#saveDispatchButton").click(function () {
          saveDispatch();
        });
    
        // Function to save dispatch
        function saveDispatch() {
          // Add your logic here to save dispatch data
          var dispatchData = {
            dispatchNo: generateDispatchNo(), // You can implement your own dispatch number logic
            dispatchDate: $("#dispatchDate").val(),
            product: $("#product").val(),
            warehouse: $("#warehouse").val(),
            transporter: $("#transporter").val(),
            staffAssigned: $("#staffMember").val(),
            units: getUnitTableData(),
            status: "Pending", // You can set initial status as "Pending"
          };
    
          // Add the dispatch to the pendingDispatches array
          pendingDispatches.push(dispatchData);
    
          // Clear the form
          clearDispatchForm();
    
          // Update the pending dispatch table
          updatePendingDispatchTable();
        }
    
        // Function to get unit table data
        function getUnitTableData() {
          var unitData = [];
          $("#unitTableBody tr").each(function () {
            var formationUnit = $(this).find("td:eq(1)").text();
            var quantity = $(this).find("td:eq(2)").text();
            var unitMeasure = $(this).find("td:eq(3)").text();
    
            unitData.push({
              formationUnit: formationUnit,
              quantity: quantity,
              unitMeasure: unitMeasure,
            });
          });
          return unitData;
        }
    
        // Function to update the pending dispatch table
        function updatePendingDispatchTable() {
          $("#pendingDispatchTableBody").empty();
    
          for (var i = 0; i < pendingDispatches.length; i++) {
            var dispatch = pendingDispatches[i];
    
            var unitsCount = dispatch.units.length;
    
            var row =
              "<tr>" +
              "<td>" + dispatch.dispatchNo + "</td>" +
              "<td>" + dispatch.dispatchDate + "</td>" +
              "<td>" + dispatch.product + "</td>" +
              "<td>" + dispatch.warehouse + "</td>" +
              "<td>" + dispatch.transporter + "</td>" +
              "<td>" + dispatch.staffAssigned + "</td>" +
              "<td>" + unitsCount + "</td>" +
              "<td>" + dispatch.status + "</td>" +
              "<td><button type='button' class='btn btn-info btn-sm viewDispatchBtn' data-bs-toggle='modal' data-bs-target='#viewDispatchModal'>View</button></td>" +
              "</tr>";
    
            $("#pendingDispatchTableBody").append(row);
          }
        }
    
        // Function to clear the dispatch form
        function clearDispatchForm() {
          $("#dispatchForm")[0].reset();
          $("#unitTableBody").empty();
        }
    
        // Function to generate a dispatch number (you can customize this logic)
        function generateDispatchNo() {
          // Implement your own logic to generate a dispatch number
          return "D" + Math.floor(Math.random() * 1000);
        }
      });
    </script>
    <script>
      // Function to populate the View Dispatch Modal
      function populateViewDispatchModal(dispatchData) {
        // Update modal title
        $("#viewDispatchModalLabel").text("View Dispatch Details");
    
        // Populate date, product, quantity, transporter, driver, and number of units
        $("#viewDispatchModal .modal-body .row .col-md-6").html(`
          <p class="mb-1"><strong>Date Dispatched:</strong> ${dispatchData.dispatchDate}</p>
          <p class="mb-1"><strong>Product Dispatched:</strong> ${dispatchData.product}</p>
          <p class="mb-1"><strong>Quantity:</strong> ${dispatchData.quantity} ${dispatchData.unit}</p>
        `);
        $("#viewDispatchModal .modal-body .row .col-md-6").append(`
          <p class="mb-1"><strong>Transporter:</strong> ${dispatchData.transporter}</p>
          <p class="mb-1"><strong>Driver:</strong> ${dispatchData.driver}</p>
          <p class="mb-1"><strong>Number of Units:</strong> ${dispatchData.units.length}</p>
        `);
         // Generate QR Code
  var qrCodeContainer = $("#viewDispatchModal .modal-body .row .col-md-6").append("<div id='qrCode'></div>");

  var qrCode = new QRCode(document.getElementById("qrCode"), {
    width: 200,
    height: 200,
  });

  // Create a JSON string of dispatchData and set it as the QR code value
  var dispatchDataJson = JSON.stringify(dispatchData);
  qrCode.makeCode(dispatchDataJson);
    
        // Populate table with units data
        var tableBody = $("#viewDispatchModal .modal-body table tbody");
        tableBody.empty();
        dispatchData.units.forEach(function(unit) {
          var row = `
            <tr>
              <td>${unit.formationUnit}</td>
              <td>${unit.location}</td>
              <td>${unit.deliveryPoint}</td>
              <td>${unit.quantity} ${unit.unitMeasure}</td>
            </tr>
          `;
          tableBody.append(row);
        });
    
        // Populate total in the table footer
        var tableFooter = $("#viewDispatchModal .modal-body table tfoot tr");
        var totalQuantity = dispatchData.units.reduce((total, unit) => total + parseFloat(unit.quantity), 0);
        tableFooter.html(`
          <td colspan="3" class="text-end"><strong>Total:</strong></td>
          <td>${totalQuantity} ${dispatchData.unit}</td>
        `);
    
        // Show the modal
        $("#viewDispatchModal").modal("show");
      }
    
      // Example usage
      var exampleDispatchData = {
        dispatchDate: "2024-01-23",
        product: "Coffee",
        quantity: 100,
        unit: "Kg",
        transporter: "XYZ Transport",
        driver: "John Doe",
        units: [
          { formationUnit: "51 INF BN", location: "Location A", deliveryPoint: "Point A", quantity: 20, unitMeasure: "Kg" },
          { formationUnit: "52 INF BN", location: "Location B", deliveryPoint: "Point B", quantity: 30, unitMeasure: "Kg" }
          // Add more units as needed
        ]
      };
    
      // Call the function to populate the modal with example data
      populateViewDispatchModal(exampleDispatchData);
    </script>
    

